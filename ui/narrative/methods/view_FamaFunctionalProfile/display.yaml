#
# define display information
#
name: View Fama Functional Profile - v1.1

tooltip: |
    View a functional profile generated by Fama

screenshots: []

icon: fama-green.png

#
# define a set of similar apps that might be useful to the user
#
suggestions:
    apps:
        related:
            []
        next:
            []

#
# Configure the display and description of parameters
#
parameters :
    func_profile_ref :
        ui-name : |
            Functional profile
        short-hint : |
            Select a functional profile
        long-hint : |
            Select a functional profile generated by Fama

description : |
    <p><strong>SUMMARY</strong></p>

    <p>Functional profile captures genetic potential of microbial community for biological processes of interest, just like taxonomic profile captures microbial diversity. This app generates visualization of a functional profile generated by the "Run Fama Read Profiling" app. Depending on the type and size of the input read libraries, Fama Read Profiling generates either normalized scores or raw read counts.</p>
    
    <p>For comparison between functions and between samples, raw read counts are normalized by library size, target gene size and predicted average genome size in the sample. For normalization by average genome size, Fama employs MicrobeCensus tool. The normalization metric for single-read libraries is ERPKG (number of reads per kb of effective gene length per genome-equivalent):</p>
    
    <p>ERPKG = (reads mapped to to gene) / (effective gene length in kb) / (genome equivalents),</p>
    
    <p>where effective gene length = (actual gene length) + (read length) - 2 * (minimal alignment length) + 1,<\br>
    genome equivalents = (number of reads in library) / (average genome size)</p>
    
    <p>The normalization metric for paired-end read libraries is EFPKG(number of fragments per kb of effective gene length per genome-equivalent), which is calculated similarly to ERPKG, but with fragment count instead of read count, and some minor differences in calculation of effective gene length.</p>
    
    <p>If calculation of normalized scores is not possible (because of small number of reads etc.), only read counts and fragment counts are reported for single read and paired-end read libraries, respectively.</p>
    
    <p><strong>INPUT</strong></p>
    
    <p>Functional profile object, output of the "Run Fama Read Profiling" app.</p> 
    
    <p><strong>OUTPUT</strong></p>

    <p>HTML page with two tabs: "Profile Statistics" and "Profile Heatmap". The "Profile Statistics" tab shows aggregating statistics for rows and columns. The "Profile Heatmap" tab contains interactive 2D heatmap of scores with samples in columns and functions in rows.</p>
    
    <p><strong>Additional resources</strong></p>
    <ul><li><a href="https://iseq.lbl.gov/fama/">More info about Fama</a></li>
    <li><a href="https://narrative.kbase.us/narrative/74172">Example narrative</a></li></ul>

    <p><strong>Team members who implemented App in KBase:</strong> <a href="https://narrative.kbase.us/#people/kazakov">Alexey Kazakov</a>.For questions, please <a href=”mailto:aekazakov@lbl.gov&subject=ViewFamaFunctionalProfile”>contact us</a>.</p>

publications :
    -
        display-text: |
            Kazakov A, Novichkov P. Fama: a computational tool for comparative analysis of shotgun metagenomic data. Great Lakes Bioinformatics conference (poster presentation). 2019.
        link: https://iseq.lbl.gov/mydocs/fama_glbio2019_poster.pdf
    -
        pmid: 25402007
        display-text: |
            Buchfink B, Xie C, Huson DH. Fast and sensitive protein alignment using DIAMOND. Nature Methods. 2015;12: 59-60. doi: 10.1038/nmeth.3176. Publication about third-party program used by Fama.
        link: https://pubmed.ncbi.nlm.nih.gov/25402007/
    -
        pmid: 25853934
        display-text: |
            Nayfach S, Pollard KS. Average genome size estimation improves comparative metagenomics and sheds light on the functional ecology of the human microbiome. Genome Biology. 2015;16: 51. doi: 10.1186/s13059-015-0611-7. Publication about third-party program used by Fama.
        link: https://www.ncbi.nlm.nih.gov/pmc/articles/pmid/25853934/
    -
        pmid: 21961884
        display-text: |
            Ondov B, Bergman NH et al. Interactive metagenomic visualization in a Web browser. BMC Bioinformatics. 2011;12: 385. doi: 10.1186/1471-2105-12-385. Publication about third-party program used by Fama.
        link: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3190407/
